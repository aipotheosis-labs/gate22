[importlinter]
root_package = aci
include_external_packages = true

# 1) common must not depend on any feature modules
[importlinter:contract:common_independent]
name = Common must be independent
type = forbidden
source_modules =
    aci.common
forbidden_modules =
    aci.cli
    aci.control_plane
    aci.mcp
    aci.virtual_mcp

# 2) all non-common modules must not depend on each other
[importlinter:contract:features_are_independent]
name = Feature modules are independent of each other
type = independence
modules =
    aci.cli
    aci.control_plane
    aci.mcp
    aci.virtual_mcp
